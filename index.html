<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edward Lu Portfolio</title>
    <link rel="stylesheet" href="css/style.css"> <!-- Link to your CSS file -->
    <style>
        /* Ensure no CSS rules affect scrolling */
        .section {
            height: 100vh; /* Full viewport height for testing */
            overflow-y: auto; /* Allow vertical scrolling */
        }
    </style>
</head>
<body>
    <!-- Compass Navigation -->
    <div class="compass-container">
        <div class="center-logo">
            <img src="images/spin.gif" alt="My Logo">
        </div>
        <div class="option option-north">
            <a href="#section-art" data-file="art-portfolio.html" data-scroll="north">
                <img src="images/lake.jpg" alt="ART">
                <span>art</span>
            </a>
        </div>
        <div class="option option-south">
            <a href="#section-data" data-file="data-portfolio.html" data-scroll="south">
                <img src="images/shark.png" alt="DATA">
                <span>data</span>
            </a>
        </div>
        <div class="option option-east">
            <a href="#section-resume" data-file="resume.html" data-scroll="east">
                <img src="images/dumpling.png" alt="RESUME">
                <span>resume</span>
            </a>
        </div>
        <div class="option option-west">
            <a href="#section-about" data-file="contact.html" data-scroll="west">
                <img src="images/krab.png" alt="contact">
                <span>about</span>
            </a>
        </div>
    </div>

    <!-- Sections -->
    <div id="section-art" class="section"></div>
    <div id="section-data" class="section"></div>
    <div id="section-resume" class="section"></div>
    <div id="section-about" class="section"></div>

    <!-- Include JavaScript for loading content and smooth scrolling -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            let activeScroll = null;
            let scrollTimeout = null;

            // Smooth scrolling and content loading
            document.querySelectorAll('.option a').forEach(anchor => {
                anchor.addEventListener('click', function(e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href');
                    const targetElement = document.querySelector(targetId);
                    const scrollDirection = this.getAttribute('data-scroll');

                    if (activeScroll === scrollDirection) {
                        // If the same scroll direction is clicked again, return to compass
                        if (scrollTimeout) clearTimeout(scrollTimeout);
                        document.querySelector('.compass-container').scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        activeScroll = null;
                        return;
                    }

                    // Only activate one scroll at a time
                    if (activeScroll) {
                        // Undo the previous scroll
                        document.querySelector(`#section-${activeScroll}`).scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                        activeScroll = null;
                    }

                    // Activate new scroll
                    if (targetElement) {
                        // Load content into the target section
                        const file = this.getAttribute('data-file');
                        fetch(file)
                            .then(response => response.text())
                            .then(html => {
                                targetElement.innerHTML = html;
                            })
                            .catch(err => console.warn('Error loading content:', err));

                        targetElement.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });

                        // Ensure the page can still be scrolled
                        setTimeout(() => {
                            targetElement.style.overflowY = 'auto';
                        }, 300);

                        activeScroll = scrollDirection;
                    }
                });
            });
        });
    </script>
</body>
</html>
